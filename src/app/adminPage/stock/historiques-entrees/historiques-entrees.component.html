<!-- ===================== -->
<!-- üìä TABLEAU HISTORIQUE DES ENTR√âES -->
<!-- ===================== -->
<div class="mt-10">

    <h2 class="text-lg font-semibold mb-4 text-center text-gray-500">
        Historique des entr√©es
    </h2>

    <!-- Wrapper n√©cessaire pour tablette (portrait) -->
    <div class="overflow-x-auto">

        <table class="w-full min-w-[1000px]
             bg-white rounded-lg shadow">
            <thead class="bg-gray-100">
                <tr>
                    <th class="p-4 text-left">Code Produit</th>
                    <th class="p-4 text-left">Nom produit</th>
                    <th class="p-4 text-center">Quantit√©</th>
                    <th class="p-4 text-left">Fournisseur</th>
                    <th class="p-4 text-left">Date d'entr√©e</th>
                    <th class="p-4 text-left">Date de p√©remption</th>
                    <th class="p-4 text-center">Actions</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let e of entrees" class="border-b hover:bg-gray-50">

                    <td class="p-4 whitespace-nowrap">
                        {{ e.codeProduit }}
                    </td>

                    <td class="p-4 whitespace-nowrap">
                        {{ e.nomProduit }}
                    </td>

                    <td class="p-4 text-center">
                        {{ e.quantite }}
                    </td>

                    <td class="p-4">
                        {{ e.fournisseur }}
                    </td>

                    <td class="p-4 whitespace-nowrap">
                        {{ e.dateMouvement ? (e.dateMouvement | date:'dd/MM/yyyy') : '-' }}
                    </td>

                    <td class="p-4 whitespace-nowrap">
                        {{ e.dateDePeremption ? (e.dateDePeremption | date:'dd/MM/yyyy') : '-' }}
                    </td>

                    <td class="p-4 text-center">
                        <button (click)="openModal(e)" class="px-3 py-1.5
                     bg-gray-200 hover:bg-gray-300
                     rounded-lg font-medium transition">
                            D√©tails
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

    </div>
</div>

<!-- ===================== -->
<!-- ü™ü MODAL D√âTAILS ENTR√âE -->
<!-- ===================== -->
<div *ngIf="selectedProduit" class="fixed inset-0
            flex items-center justify-center
            bg-black bg-opacity-50 z-50">

    <div class="bg-white rounded-2xl shadow-xl
           w-full max-w-2xl
           p-6 relative
           max-h-[90vh] overflow-y-auto
           animate-fadeIn">

        <!-- Bouton fermeture -->
        <button (click)="closeModal()" class="absolute top-4 right-4
             text-gray-500 hover:text-red-500
             text-xl transition">
            ‚úï
        </button>

        <!-- Titre -->
        <h2 class="text-2xl font-semibold text-gray-800
             mb-6 border-b pb-3">
            D√©tails de l'entr√©e en stock
        </h2>

        <!-- Contenu (grille lisible desktop/tablette) -->
        <div class="grid grid-cols-2 gap-x-6 gap-y-4 text-gray-700">

            <div>
                <span class="font-semibold">Code Produit :</span><br>
                {{ selectedProduit.codeProduit }}
            </div>

            <div>
                <span class="font-semibold">Nom :</span><br>
                {{ selectedProduit.nomProduit }}
            </div>

            <div>
                <span class="font-semibold">Quantit√© :</span><br>
                {{ selectedProduit.quantite }}
            </div>

            <div>
                <span class="font-semibold">Fournisseur :</span><br>
                {{ selectedProduit.fournisseur }}
            </div>

            <div>
                <span class="font-semibold">Motif :</span><br>
                {{ selectedProduit.motifMouvement }}
            </div>

            <div>
                <span class="font-semibold">Responsable :</span><br>
                {{ selectedProduit.responsable }}
            </div>

            <div>
                <span class="font-semibold">Type :</span><br>
                {{ selectedProduit.type }}
            </div>

            <div>
                <span class="font-semibold">N¬∞ Facture :</span><br>
                {{ selectedProduit.numeroFacture }}
            </div>

            <div>
                <span class="font-semibold">Date d'entr√©e :</span><br>
                {{ selectedProduit.dateMouvement | date:'dd/MM/yyyy' }}
            </div>

            <div>
                <span class="font-semibold">Date de p√©remption :</span><br>
                {{ selectedProduit.dateDePeremption | date:'dd/MM/yyyy' }}
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-8 text-right">
            <button (click)="closeModal()" class="px-5 py-2
               bg-gray-200 hover:bg-gray-300
               rounded-lg font-medium transition">
                Fermer
            </button>
        </div>
    </div>
</div>