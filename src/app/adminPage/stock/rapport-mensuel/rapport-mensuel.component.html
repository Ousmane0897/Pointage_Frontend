<div class="p-8 bg-white rounded-2xl shadow-lg">
  <h2 class="text-2xl font-bold text-blue-700 mb-6 flex items-center gap-3">
    ğŸ“… Rapport mensuel du stock
  </h2>

  <!-- SÃ©lecteur Mois / AnnÃ©e / Produit -->
  <div class="flex flex-col md:flex-row gap-4 mb-8 items-center justify-between">
    <div class="flex flex-wrap gap-4">
      <!-- Mois -->
      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">Mois</label>
        <select [(ngModel)]="moisSelectionne" 
          class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
          <option *ngFor="let m of moisDisponibles; let i = index" [value]="i + 1">{{ m }}</option>
        </select>
      </div>

      <!-- AnnÃ©e -->
      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">AnnÃ©e</label>
        <input type="number" [(ngModel)]="anneeSelectionnee"
          class="border border-gray-300 rounded-lg px-3 py-2 w-28 focus:ring-2 focus:ring-blue-400 focus:outline-none"
          min="2020" max="2100" />
      </div>
    </div>

    <button (click)="chargerRapport()"
      class="mt-3 md:mt-0 px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md transition-all duration-300">
      ğŸ”„ Actualiser
    </button>
  </div>


  <div *ngIf="loading" class="text-center text-gray-500">Chargement...</div>

  <div *ngIf="rapport && !loading">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-8">
      <div class="bg-green-50 border-l-4 border-green-600 p-4 rounded">
        <p class="text-lg font-semibold text-green-800">{{ rapport.totalEntrees }}</p>
        <p class="text-gray-600 text-sm">EntrÃ©es du mois</p>
      </div>

      <div class="bg-red-50 border-l-4 border-red-600 p-4 rounded">
        <p class="text-lg font-semibold text-red-800">{{ rapport.totalSorties }}</p>
        <p class="text-gray-600 text-sm">Sorties du mois</p>
      </div>

      <div class="bg-blue-50 border-l-4 border-blue-600 p-4 rounded">
        <p class="text-lg font-semibold text-blue-800">{{ rapport.solde }}</p>
        <p class="text-gray-600 text-sm">Solde net</p>
      </div>
    </div>

    <!-- ğŸ† Top produits sortis -->
    <h3 class="text-lg font-semibold mb-3 text-gray-700">ğŸ† Top 5 produits sortis</h3>
    <table class="w-full border text-sm text-left">
      <thead class="bg-gray-100">
        <tr>
          <th class="p-2 border">Produit</th>
          <th class="p-2 border text-right">QuantitÃ©</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of rapport.topProduits" class="hover:bg-gray-50">
          <td class="p-2 border">{{ p.key }}</td>
          <td class="p-2 border text-right font-medium">{{ p.value }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
