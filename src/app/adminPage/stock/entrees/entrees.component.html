<div class="p-8 max-w-7xl mx-auto">

  <!-- ===================== -->
  <!-- üß≠ EN-T√äTE -->
  <!-- ===================== -->
  <div class="flex items-center gap-4 mb-8">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-gray-800" viewBox="0 -960 960 960"
      fill="currentColor">
      <path
        d="M450-154v-309L180-619v309l270 156Zm60 0 270-156v-310L510-463v309Zm-60 69L150-258q-14-8-22-22t-8-30v-340q0-16 8-30t22-22l300-173q14-8 30-8t30 8l300 173q14 8 22 22t8 30v340q0 16-8 30t-22 22L510-85q-14 8-30 8t-30-8Z" />
    </svg>

    <h1 class="text-3xl font-semibold text-gray-800">
      Entr√©es en stock
    </h1>
  </div>

  <!-- ===================== -->
  <!-- üìù FORMULAIRE -->
  <!-- ===================== -->
  <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">

    <h2 class="text-xl font-bold mb-6">
      Nouvelle entr√©e
    </h2>

    <!-- Grille desktop / tablette -->
    <div class="grid grid-cols-2 gap-6">

      <!-- Code produit -->
      <input type="text" placeholder="Code Produit" [(ngModel)]="nouvelleEntree.codeProduit" readonly
        class="border rounded-lg p-3 bg-gray-100" />

      <!-- Produit -->
      <select [(ngModel)]="nouvelleEntree.nomProduit" (ngModelChange)="onProduitChange($event)"
        class="border rounded-lg p-3">
        <option value="">-- S√©lectionner un produit --</option>
        <option *ngFor="let produit of produits" [value]="produit.nomProduit">
          {{ produit.nomProduit }}
        </option>
      </select>

      <!-- Type -->
      <select [(ngModel)]="nouvelleEntree.type" class="border rounded-lg p-3">
        <option value="ENTREE">Entr√©e</option>
        <option value="AJUSTEMENT">Ajustement</option>
      </select>

      <!-- Quantit√© -->
      <input type="number" placeholder="Quantit√©" [(ngModel)]="nouvelleEntree.quantite" class="border rounded-lg p-3" />

      <!-- Responsable -->
      <input type="text" placeholder="Responsable" [(ngModel)]="nouvelleEntree.responsable"
        class="border rounded-lg p-3" />

      <!-- Motif -->
      <select [(ngModel)]="nouvelleEntree.motifMouvement" class="border rounded-lg p-3">
        <option value="">-- S√©lectionner un motif --</option>
        <option *ngFor="let motif of motifs" [value]="motif">
          {{ motif }}
        </option>
      </select>

      <!-- Fournisseur -->
      <input *ngIf="nouvelleEntree.motifMouvement !== 'RETOUR_EN_STOCK'
               && nouvelleEntree.motifMouvement !== 'AJUSTEMENT_INVENTAIRE'" type="text" placeholder="Fournisseur"
        [(ngModel)]="nouvelleEntree.fournisseur" class="border rounded-lg p-3" />

      <!-- Facture -->
      <input *ngIf="nouvelleEntree.motifMouvement !== 'RETOUR_EN_STOCK'
               && nouvelleEntree.motifMouvement !== 'AJUSTEMENT_INVENTAIRE'" type="text"
        placeholder="Num√©ro de facture" [(ngModel)]="nouvelleEntree.numeroFacture" class="border rounded-lg p-3" />
    </div>

    <!-- ===================== -->
    <!-- üìÖ DATES -->
    <!-- ===================== -->
    <div class="grid grid-cols-2 gap-6 mt-6">

      <!-- Date p√©remption -->
      <mat-form-field *ngIf="nouvelleEntree.motifMouvement !== 'RETOUR_EN_STOCK'
               && nouvelleEntree.motifMouvement !== 'AJUSTEMENT_INVENTAIRE'" appearance="fill" class="w-full">
        <mat-label>Date de p√©remption</mat-label>
        <input matInput [matDatepicker]="pickerPeremption" [(ngModel)]="nouvelleEntree.dateDePeremption"
          [min]="dateAujourdhui" readonly>
        <mat-datepicker-toggle matSuffix [for]="pickerPeremption"></mat-datepicker-toggle>
        <mat-datepicker #pickerPeremption></mat-datepicker>
      </mat-form-field>

      <!-- Date entr√©e -->
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Date d'entr√©e en stock</mat-label>
        <input matInput [matDatepicker]="pickerEntree" [(ngModel)]="nouvelleEntree.dateMouvement" [min]="dateAujourdhui"
          readonly>
        <mat-datepicker-toggle matSuffix [for]="pickerEntree"></mat-datepicker-toggle>
        <mat-datepicker #pickerEntree></mat-datepicker>
      </mat-form-field>

    </div>
  </div>

  <!-- ===================== -->
  <!-- ‚úÖ BOUTON VALIDATION -->
  <!-- ===================== -->
  <div class="text-right">
    <button (click)="ajouterEntree()" [disabled]="!nouvelleEntree.codeProduit
                  || !nouvelleEntree.nomProduit
                  || !nouvelleEntree.type
                  || !nouvelleEntree.quantite
                  || !nouvelleEntree.responsable
                  || !nouvelleEntree.motifMouvement
                  || !nouvelleEntree.dateMouvement
                  || (nouvelleEntree.motifMouvement !== 'RETOUR_EN_STOCK'
                      && nouvelleEntree.motifMouvement !== 'AJUSTEMENT_INVENTAIRE'
                      && !nouvelleEntree.dateDePeremption)" class="bg-green-600 hover:bg-green-700
             text-white text-lg
             px-6 py-3 rounded-lg
             transition">
      ‚ûï Enregistrer l'entr√©e
    </button>
  </div>

</div>